<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>線上輔助唸珠 | 線上玫瑰經祈禱團體</title>
    
    <!-- 引入 Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&family=Noto+Serif+TC:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- 引入 Font Awesome 圖示 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* --- 繼承全域變數 --- */
        :root {
            --primary-color: #003366; 
            --secondary-color: #4A90E2; 
            --accent-color: #D4AF37; 
            --bg-color: #F5F7FA;
            --section-bg: #FFFFFF;
            --border-color: #DAE1E7;
            --text-color: #2C3E50; 
            --light-text: #5D6D7E; 
            --white: #ffffff;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            color: var(--text-color);
            background-color: var(--bg-color);
            background-image: radial-gradient(#4A90E2 0.5px, transparent 0.5px), radial-gradient(#4A90E2 0.5px, #F5F7FA 0.5px);
            background-size: 20px 20px;
            background-position: 0 0, 10px 10px;
            background-attachment: fixed;
            line-height: 1.5;
            /* 關鍵：全螢幕無捲動設定 */
            height: 100dvh; 
            overflow: hidden;
            display: flex;
            flex-direction: column;
            user-select: none;
            -webkit-user-select: none;
        }

        h1, h2, h3, h4 {
            font-family: 'Noto Serif TC', serif;
            color: var(--primary-color);
            letter-spacing: 0.05em;
        }

        a { text-decoration: none; color: inherit; }

        /* --- 導覽列 (同步 index.html) --- */
        header {
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 51, 102, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            height: 70px; /* 固定高度以便計算版面 */
            display: flex;
            flex-direction: column;
        }
        
        .header-top-bar {
            height: 6px;
            flex-shrink: 0;
            background: repeating-linear-gradient(
                90deg,
                var(--primary-color),
                var(--primary-color) 20px,
                var(--secondary-color) 20px,
                var(--secondary-color) 40px,
                var(--accent-color) 40px,
                var(--accent-color) 45px,
                var(--white) 45px,
                var(--white) 50px
            );
        }

        nav {
            max-width: 1100px;
            width: 100%;
            margin: 0 auto;
            padding: 0 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100%;
        }

        .logo {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon-box {
            width: 36px;
            height: 36px;
            background-color: var(--primary-color);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50% 50% 0 50%;
            box-shadow: 2px 2px 0px var(--accent-color);
        }

        .logo-icon-box i { font-size: 1rem; margin-top: 2px; color: var(--white); }
        .logo-text { display: flex; flex-direction: column; line-height: 1.1; }
        .logo small { font-size: 0.7rem; font-weight: 400; color: var(--secondary-color); }

        .nav-links { display: flex; gap: 1.5rem; align-items: center; }
        .nav-links a { font-weight: 600; font-size: 0.95rem; transition: color 0.3s; color: var(--text-color); position: relative; }
        .nav-links a:hover { color: var(--secondary-color); }

        .cta-button-small {
            background-color: var(--secondary-color);
            color: var(--white) !important;
            padding: 0.5rem 1.2rem;
            font-size: 0.9rem;
            transition: all 0.3s;
            border-radius: 50px;
            box-shadow: 0 4px 6px rgba(74, 144, 226, 0.3);
        }
        .cta-button-small:hover { 
            background-color: var(--primary-color); 
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 51, 102, 0.3);
        }

        .mobile-menu-btn { display: none; font-size: 1.5rem; cursor: pointer; color: var(--primary-color); }

        /* --- 主要內容區塊 (Flex 佈局) --- */
        #rosary-app {
            flex-grow: 1; /* 佔滿剩餘空間 */
            margin-top: 70px; /* Header Height */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-evenly; /* 平均分配垂直空間 */
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            padding: 10px;
            overflow: hidden; /* 防止內部溢出 */
        }

        /* 奧蹟標題卡 */
        .mystery-header {
            text-align: center;
            flex-shrink: 0;
            z-index: 5;
        }
        .mystery-header h2 { 
            font-size: 1.3rem; 
            margin-bottom: 2px; 
            color: var(--primary-color);
            text-shadow: 0 2px 10px rgba(255,255,255,0.8);
        }
        .mystery-header p { 
            color: var(--light-text); 
            font-size: 0.9rem; 
            background: rgba(255,255,255,0.6);
            padding: 2px 10px;
            border-radius: 20px;
        }

        /* 擬真念珠容器 */
        .beads-container {
            position: relative;
            /* 使用 vmin 確保在任何方向都不會超出螢幕 */
            width: 40vmin; 
            height: 40vmin;
            max-width: 320px;
            max-height: 320px;
            margin: 10px 0;
            border-radius: 50%;
            /* 金屬鍊條效果 */
            border: 1px dashed #aaa; 
            box-shadow: inset 0 0 20px rgba(0,0,0,0.05);
        }
        
        /* 鍊條 SVG 背景 */
        .chain-svg {
            position: absolute;
            top: -5%; left: -5%;
            width: 110%; height: 110%;
            pointer-events: none;
            opacity: 0.4;
        }

        /* 珠子樣式 (擬真) */
        .bead {
            position: absolute;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            
            /* 擬真材質：聖母藍寶石質感 */
            background: radial-gradient(circle at 30% 30%, #aaddff, #4A90E2, #003366);
            box-shadow: 2px 2px 4px rgba(0,0,0,0.3), inset -2px -2px 4px rgba(0,0,0,0.2);
            z-index: 2;
        }

        /* 特殊珠 (大珠/十字架) */
        .bead[data-type="large"] {
            width: 28px;
            height: 28px;
            background: radial-gradient(circle at 30% 30%, #fffbe6, #D4AF37, #b8860b); /* 金色 */
        }
        
        .bead[data-type="cross"] {
            width: 30px; height: 36px;
            border-radius: 4px;
            background: radial-gradient(circle at 30% 30%, #ddd, #999); /* 銀色 */
            clip-path: polygon(20% 0%, 80% 0%, 80% 20%, 100% 20%, 100% 45%, 80% 45%, 80% 100%, 20% 100%, 20% 45%, 0% 45%, 0% 20%, 20% 20%);
        }

        /* 激活狀態 (發光 + 放大) */
        .bead.active {
            transform: translate(-50%, -50%) scale(1.5);
            box-shadow: 0 0 15px var(--accent-color), 0 0 30px var(--secondary-color);
            z-index: 10;
            filter: brightness(1.2);
        }
        
        /* 中心裝飾 (聖母牌) */
        .center-medal {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 60px; height: 80px;
            background: radial-gradient(ellipse at center, #fff, #f0f0f0);
            border: 2px solid var(--accent-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: var(--secondary-color);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            z-index: 1;
        }

        /* 經文顯示卡片 */
        .prayer-display {
            background-color: var(--white);
            width: 95%;
            max-width: 500px;
            padding: 1.2rem;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            border-bottom: 4px solid var(--primary-color);
            position: relative;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: center;
            /* 讓卡片高度稍微固定，避免跳動，但不過高 */
            min-height: 25vh; 
            max-height: 35vh;
            flex-shrink: 1; /* 允許在小螢幕縮小 */
            overflow-y: auto; /* 文字過多時可捲動內容 */
        }
        
        .prayer-display:active {
            background-color: #f8fafc;
            transform: scale(0.99);
        }

        .prayer-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            flex-shrink: 0;
        }
        
        .prayer-text {
            font-size: 1.05rem;
            color: #444;
            line-height: 1.6;
            flex-grow: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            white-space: pre-wrap; /* 保留換行 */
        }

        .progress-indicator {
            margin-top: 0.8rem;
            font-size: 0.8rem;
            color: var(--light-text);
            background: #eee;
            padding: 2px 10px;
            border-radius: 20px;
            align-self: center;
            flex-shrink: 0;
        }

        .tap-hint {
            font-size: 0.75rem;
            color: #aaa;
            margin-top: 5px;
            flex-shrink: 0;
        }

        /* 控制按鈕列 */
        .controls {
            display: flex;
            gap: 20px;
            margin-bottom: 10px;
            flex-shrink: 0;
        }

        .control-btn {
            background-color: var(--white);
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            width: 40px; height: 40px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .control-btn:active {
            background-color: var(--primary-color);
            color: var(--white);
        }

        /* --- Footer (極簡版，配合無捲動) --- */
        footer {
            background-color: var(--primary-color); 
            color: var(--white); 
            padding: 0.5rem; 
            text-align: center;
            border-top: 4px solid var(--accent-color);
            font-size: 0.75rem;
            flex-shrink: 0;
            height: auto;
        }
        
        footer p { margin: 2px 0; opacity: 0.8; }
        .social-links { display: none; } /* 空間不足時隱藏社交連結 */

        @media (min-height: 800px) {
            .social-links { display: block; margin: 5px 0; }
            .social-links a { margin: 0 5px; color: var(--accent-color); font-size: 1rem; }
            footer { padding: 1rem; }
        }

        @media (max-width: 768px) {
            .nav-links { display: none; position: absolute; top: 100%; left: 0; width: 100%; background-color: var(--section-bg); flex-direction: column; padding: 1.5rem; box-shadow: 0 10px 15px rgba(0,0,0,0.1); border-bottom: 5px solid var(--secondary-color); }
            .nav-links.active { display: flex; }
            .nav-links a { margin: 10px 0; width: 100%; text-align: center; }
            .mobile-menu-btn { display: block; }
            
            /* 手機版調整 */
            .beads-container { width: 45vmin; height: 45vmin; }
            .prayer-display { width: 90%; min-height: 20vh; }
            .prayer-text { font-size: 1rem; }
        }
    </style>
</head>
<body>

    <header>
        <div class="header-top-bar"></div>
        <nav>
            <div class="logo">
                <div class="logo-icon-box"><i class="fa-solid fa-dove"></i></div>
                <div class="logo-text">
                    <span>線上玫瑰經祈禱</span>
                    <small>每晚9點 LINE會議室</small>
                </div>
            </div>
            <div class="nav-links">
                <a href="index.html">回到首頁</a>
                <a href="index.html#about">關於我們</a>
                <a href="index.html#info">聚會資訊</a>
                <a href="rosary.html" style="color: var(--secondary-color);"><i class="fa-solid fa-xs fa-bullseye"></i> 線上唸珠</a>
                <a href="intercession.html">代禱牆</a>
                <a href="https://line.me/R/meeting/6e1105b1919945ddad5390853d75be5d" target="_blank" class="cta-button-small">進入會議室</a>
            </div>
            <div class="mobile-menu-btn"><i class="fa-solid fa-bars"></i></div>
        </nav>
    </header>

    <div id="rosary-app">
        
        <!-- 奧蹟顯示 -->
        <div class="mystery-header">
            <h2 id="current-mystery-title">準備祈禱</h2>
            <p id="current-mystery-desc">請懷著虔敬的心</p>
        </div>

        <!-- 珠子視覺化 -->
        <div class="beads-container" id="beads-ring">
            <!-- 鍊條裝飾 -->
            <svg class="chain-svg" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="48" fill="none" stroke="#ccc" stroke-width="1" stroke-dasharray="2,2" />
            </svg>
            
            <!-- 中心聖母牌 -->
            <div class="center-medal">
                <i class="fa-solid fa-hands-praying"></i>
            </div>
            
            <!-- 珠子由 JS 動態生成 -->
        </div>

        <!-- 經文卡片 (點擊區域) -->
        <div class="prayer-display" id="prayer-card" onclick="nextBead()">
            <div class="prayer-title" id="prayer-name">聖號經</div>
            <div class="prayer-text" id="prayer-content">因父、及子、及聖神之名。<br>阿們。</div>
            <div class="progress-indicator" id="progress-text">開始</div>
            <div class="tap-hint"><i class="fa-solid fa-hand-pointer"></i> 點擊卡片撥動下一顆</div>
        </div>

        <!-- 控制按鈕 -->
        <div class="controls">
            <button class="control-btn" onclick="prevBead()" title="上一顆"><i class="fa-solid fa-arrow-left"></i></button>
            <button class="control-btn" onclick="resetRosary()" title="重新開始"><i class="fa-solid fa-rotate-left"></i></button>
        </div>

    </div>

    <footer>
        <div class="social-links">
            <a href="#"><i class="fa-brands fa-facebook"></i></a>
            <a href="#"><i class="fa-brands fa-line"></i></a>
        </div>
        <p>© 2025 Online Rosary Group.</p>
    </footer>

    <script>
        // --- 1. 定義經文內容 ---
        const prayers = {
            signOfCross: { title: "聖號經", content: "因父、及子、及聖神之名。阿們。" },
            creed: { title: "信經", content: "我信全能的天主父，天地萬物的創造者。我信父的唯一子，我們的主耶穌基督..." },
            ourFather: { title: "天主經", content: "我們的天父，願你的名受顯揚，願你的國來臨，願你的旨意奉行在人間，如同在天上..." },
            hailMary: { title: "聖母經", content: "萬福瑪利亞，妳充滿聖寵，主與妳同在。妳在婦女中受讚頌，妳的親子耶穌同受讚頌..." },
            gloryBe: { title: "聖三光榮經", content: "願光榮歸於父、及子、及聖神。起初如何，今日亦然，直到永遠。阿們。" },
            fatima: { title: "法蒂瑪聖母禱詞", content: "吾主耶穌，請寬赦我們的罪過，助我們免於地獄永火。求祢把眾人的靈魂，特別是那些最需要祢憐憫的靈魂，領到天國裡去。" },
            hailHolyQueen: { title: "又聖母經", content: "萬福母后！仁慈的母親，我們的生命，我們的甘飴，我們的希望..." }
        };

        // --- 2. 定義奧蹟內容 ---
        const mysteries = {
            joyful: [
                { title: "歡喜一端", desc: "天使向聖母瑪利亞報喜" },
                { title: "歡喜二端", desc: "聖母拜訪聖婦依撒伯爾" },
                { title: "歡喜三端", desc: "耶穌誕生於白冷" },
                { title: "歡喜四端", desc: "聖母獻耶穌於聖殿" },
                { title: "歡喜五端", desc: "耶穌十二歲講道" }
            ],
            luminous: [
                { title: "光明一端", desc: "耶穌在約旦河受洗" },
                { title: "光明二端", desc: "耶穌參加加納婚宴" },
                { title: "光明三端", desc: "耶穌宣講天國福音" },
                { title: "光明四端", desc: "耶穌顯聖容" },
                { title: "光明五端", desc: "耶穌建立聖體聖事" }
            ],
            sorrowful: [
                { title: "痛苦一端", desc: "耶穌山園祈禱" },
                { title: "痛苦二端", desc: "耶穌受鞭打之刑" },
                { title: "痛苦三端", desc: "耶穌受茨冠之苦刑" },
                { title: "痛苦四端", desc: "耶穌背十字架上山" },
                { title: "痛苦五端", desc: "耶穌被釘死在十字架上" }
            ],
            glorious: [
                { title: "榮福一端", desc: "耶穌復活" },
                { title: "榮福二端", desc: "耶穌升天" },
                { title: "榮福三端", desc: "聖神降臨" },
                { title: "榮福四端", desc: "聖母蒙召升天" },
                { title: "榮福五端", desc: "天主光榮聖母" }
            ]
        };

        let rosarySequence = [];
        let currentIndex = 0;
        let todayMysteries = [];

        function initMystery() {
            const day = new Date().getDay();
            if (day === 1 || day === 6) todayMysteries = mysteries.joyful;
            else if (day === 2 || day === 5) todayMysteries = mysteries.sorrowful;
            else if (day === 4) todayMysteries = mysteries.luminous;
            else todayMysteries = mysteries.glorious;
        }

        function buildSequence() {
            rosarySequence = [];
            
            // --- 準備階段 (前導) ---
            // 1. 十字架: 聖號經 + 信經 (位置 0 點鐘)
            rosarySequence.push({ key: 'signOfCross', step: '開始', beadId: 'bead-cross', mysteryIdx: -1 });
            rosarySequence.push({ key: 'creed', step: '信經', beadId: 'bead-cross', mysteryIdx: -1 });
            
            // 2. 大珠: 天主經
            rosarySequence.push({ key: 'ourFather', step: '為教宗祈禱', beadId: 'bead-start-large', mysteryIdx: -1 });
            
            // 3. 小珠 x3: 聖母經 (信望愛)
            for(let i=1; i<=3; i++) {
                rosarySequence.push({ key: 'hailMary', step: `信望愛 ${i}/3`, beadId: `bead-start-${i}`, mysteryIdx: -1 });
            }
            
            // 4. 光榮經
            rosarySequence.push({ key: 'gloryBe', step: '光榮經', beadId: 'bead-gap', mysteryIdx: -1 });

            // --- 五端奧蹟循環 ---
            for (let m = 0; m < 5; m++) {
                const mNum = ["一", "二", "三", "四", "五"][m];
                
                // 宣讀奧蹟 + 天主經 (大珠)
                rosarySequence.push({ 
                    key: 'mystery', 
                    mysteryIdx: m, 
                    step: `第${mNum}端奧蹟`, 
                    beadId: 'bead-large', // 圓環上的大珠
                    isLarge: true
                });
                rosarySequence.push({ key: 'ourFather', step: `第${mNum}端`, beadId: 'bead-large', mysteryIdx: m, isLarge: true });

                // 聖母經 x10 (圓環上的10顆小珠)
                for(let i=1; i<=10; i++) {
                    rosarySequence.push({ 
                        key: 'hailMary', 
                        step: `聖母經 ${i}/10`, 
                        beadId: `bead-${i}`, // 對應圓環上的ID
                        mysteryIdx: m 
                    });
                }

                // 結束該端
                rosarySequence.push({ key: 'gloryBe', step: `第${mNum}端結束`, beadId: 'bead-gap', mysteryIdx: m });
                rosarySequence.push({ key: 'fatima', step: '法蒂瑪禱詞', beadId: 'bead-gap', mysteryIdx: m });
            }
            
            // --- 結束階段 ---
            rosarySequence.push({ key: 'hailHolyQueen', step: '結束禱詞', beadId: 'center-medal', mysteryIdx: -1 });
            rosarySequence.push({ key: 'signOfCross', step: '禮成', beadId: 'bead-cross', mysteryIdx: -1 });
        }

        // --- 渲染珠子 (視覺佈局) ---
        function renderBeads() {
            const container = document.getElementById('beads-ring');
            // 清除除了靜態元素外的動態珠子
            const existingBeads = container.querySelectorAll('.bead');
            existingBeads.forEach(b => b.remove());
            
            const radius = 48; // 半徑百分比 (0-50)
            
            // 1. 渲染一端 (10顆小珠 + 1顆大珠) 形成圓環
            // 為了視覺好看，我們把 10 顆小珠均勻分布，大珠放在頂部
            // 總共 11 個位置
            const total = 11;
            
            // 生成 10 顆小珠
            for (let i = 1; i <= 10; i++) {
                // 調整角度，讓大珠在正上方 (-90度)，小珠從右邊開始順時針
                // 0度在右邊。大珠在 270度 (-90)。
                // 分割 360 度
                // 我們讓大珠在 top, 小珠分布在圓周
                const angleDeg = -90 + (i * (360 / total));
                createBead(container, radius, angleDeg, `bead-${i}`, 'small');
            }
            
            // 生成 1 顆大珠 (在正上方)
            createBead(container, radius, -90, 'bead-large', 'large');
            
            // 生成 "開始" 用的垂飾部分 (視覺上放在圓環下方或中間)
            // 這裡為了簡化，且因空間限制，我們只在邏輯上切換，視覺上可複用位置
            // 或者在圓環內部下方加幾顆小珠代表前導
            createBead(container, 25, 90, 'bead-start-1', 'small');
            createBead(container, 15, 90, 'bead-start-2', 'small');
            createBead(container, 5, 90, 'bead-start-3', 'small');
            
            // 十字架 (另外處理，不放在圓環軌道上，而是絕對定位)
            // 已經在 CSS 中定義 bead[data-type="cross"]
        }
        
        function createBead(container, rPercent, angleDeg, id, type) {
            const bead = document.createElement('div');
            bead.className = 'bead';
            bead.id = id;
            bead.dataset.type = type;
            
            const x = 50 + rPercent * Math.cos(angleDeg * Math.PI / 180);
            const y = 50 + rPercent * Math.sin(angleDeg * Math.PI / 180);
            
            bead.style.left = `${x}%`;
            bead.style.top = `${y}%`;
            container.appendChild(bead);
        }

        // --- 互動控制 ---
        function updateDisplay() {
            const currentStep = rosarySequence[currentIndex];
            const titleEl = document.getElementById('prayer-name');
            const contentEl = document.getElementById('prayer-content');
            const progressEl = document.getElementById('progress-text');
            const mysteryTitle = document.getElementById('current-mystery-title');
            const mysteryDesc = document.getElementById('current-mystery-desc');
            
            // 更新奧蹟標題
            if (currentStep.mysteryIdx !== undefined && currentStep.mysteryIdx >= 0) {
                const currentM = todayMysteries[currentStep.mysteryIdx]; 
                mysteryTitle.innerText = currentM.title;
                mysteryDesc.innerText = currentM.desc;
            } else if (currentIndex < 5) {
                mysteryTitle.innerText = "準備祈禱";
                mysteryDesc.innerText = "請懷著虔敬的心";
            } else {
                mysteryTitle.innerText = "結束禱詞";
                mysteryDesc.innerText = "感謝天主垂聽";
            }

            // 更新經文
            if (currentStep.key === 'mystery') {
                const currentM = todayMysteries[currentStep.mysteryIdx];
                titleEl.innerText = currentM.title;
                contentEl.innerText = currentM.desc + "\n(請默想此奧蹟)";
            } else {
                titleEl.innerText = prayers[currentStep.key].title;
                contentEl.innerText = prayers[currentStep.key].content;
            }
            
            progressEl.innerText = currentStep.step;

            // 更新珠子視覺
            document.querySelectorAll('.bead').forEach(b => b.classList.remove('active'));
            
            if (currentStep.beadId) {
                const targetBead = document.getElementById(currentStep.beadId);
                if (targetBead) {
                    targetBead.classList.add('active');
                } else if (currentStep.beadId === 'bead-cross') {
                    // 如果是十字架，可以讓中心圖標發光，或暫時忽略
                }
            }
        }

        function nextBead() {
            if (currentIndex < rosarySequence.length - 1) {
                currentIndex++;
                updateDisplay();
                if (navigator.vibrate) navigator.vibrate(10); 
            } else {
                alert("祈禱結束，感謝天主！");
                currentIndex = 0;
                updateDisplay();
            }
        }

        function prevBead() {
            if (currentIndex > 0) {
                currentIndex--;
                updateDisplay();
            }
        }

        function resetRosary() {
            if(confirm("確定要重新開始嗎？")) {
                currentIndex = 0;
                updateDisplay();
            }
        }

        window.onload = function() {
            initMystery();
            buildSequence();
            renderBeads();
            updateDisplay();
            
            // 漢堡選單邏輯
            const mobileBtn = document.querySelector('.mobile-menu-btn');
            const navLinks = document.querySelector('.nav-links');
            if(mobileBtn) {
                mobileBtn.addEventListener('click', () => { 
                    navLinks.classList.toggle('active'); 
                });
            }
        };
    </script>
</body>
</html>
